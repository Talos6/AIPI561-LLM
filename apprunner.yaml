version: 1.0
runtime: custom
build:
  commands:
    pre-build:
      - apt-get update
      - apt-get install -y curl
    build:
      - docker build -t app .
run:
  command: ./start.sh
  network:
    port: 8000
  env:
    - name: DEBUG_MODE
      value: "false"
    - name: PORT
      value: "8000"
    - name: REDIS_HOST
      value: "${REDIS_HOST}"
    - name: REDIS_PORT
      value: "${REDIS_PORT}"
    - name: REDIS_PASSWORD
      value: "${REDIS_PASSWORD}"
    - name: USE_BEDROCK
      value: "false"
    - name: OLLAMA_MODEL
      value: "tinyllama"
instance:
  cpu: 2
  memory: 4096